var background=function(e){"use strict";function t(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function n(){return crypto.randomUUID()}function a(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function r(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}const o=[{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espaÃ±ol",label:"ES",supportsFormality:!0},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0},{langCode:"ID",langCodeForSpeech:"id-ID"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0},{langCode:"ZH",langCodeForSpeech:"zh-CN"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0},{langCode:"BG",langCodeForSpeech:"bg-BG"},{langCode:"CS",langCodeForSpeech:"cs-CZ"},{langCode:"DA",langCodeForSpeech:"da-DK"},{langCode:"ET",langCodeForSpeech:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu"},{langCode:"EL",langCodeForSpeech:"el-GR"},{langCode:"HU",langCodeForSpeech:"hu-HU"},{langCode:"LV",langCodeForSpeech:"lv"},{langCode:"LT",langCodeForSpeech:"lt"},{langCode:"RO",langCodeForSpeech:"ro-RO"},{langCode:"SK",langCodeForSpeech:"sk-SK"},{langCode:"SL",langCodeForSpeech:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE"},{langCode:"TR",langCodeForSpeech:"tr-TR"},{langCode:"UK",langCodeForSpeech:"uk-UA"},{langCode:"NB",langCodeForSpeech:"nb-NO"},{langCode:"KO",langCodeForSpeech:"ko-KR"},{langCode:"AR",langCodeForSpeech:"ar-AR"}],s=["EN-GB","EN-US","EN","DE"],i=0,c={inline:"inline",automatic:"automatic",manual:"manual",input:"input"},l={notLoggedIn:1,loggedInPro:2,loggedInFree:3},d={notLoggedIn:1500,loggedInFree:5e3},g={notLoggedIn:2e3,loggedInFree:2e3},u={defaultPopup:1,fptInjectedPopup:2,inlineTooltipPopup:3},p={extensionIcon:1,fptAutoInject:2},h={defaultPopup:1,injectedFptPopup:2,inlinePopup:3},m={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN"},T={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputImproveTriggerIcon:"INPUT_IMPROVE_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",hubTryWriteProLink:"HUB_TRY_WRITE_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK",onboardingSignUp:"ONBOARDING_SIGN_UP",onboardingSkipSignUp:"ONBOARDING_SKIP_SIGN_UP",onboardingLoginLink:"ONBOARDING_LOGIN_LINK",onboardingSeeAllIntegrations:"ONBOARDING_SEE_ALL_INTEGRATIONS",iconToggleInHubTranslator:"ICON_TOGGLE_IN_HUB_TRANSLATOR",iconToggleInHubWrite:"ICON_TOGGLE_IN_HUB_WRITE",manageIconSettings:"MANAGE_ICON_SETTINGS",writeLanguageSwitchedInHub:"WRITE_LANGUAGE_SWITCHED_IN_HUB",writeLanguageSwitchedInSettings:"WRITE_LANGUAGE_SWITCHED_IN_SETTINGS"},E={triggerTranslation:"trigger-translation",changeLanguage:"change-language"},_={clickOnShortcutNotifiction:"CLICK_ON_SHORTCUT_NOTIFICATION",clickOnInlineTranslationShowAlternatives:"CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",clickOnInlineTranslationCloseIcon:"CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",clickOnLogoutMenuEntry:"CLICK_ON_LOGOUT_MENU_ENTRY"},f={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},S={inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",gdocs:"GDOCS"},I={top:1,right:2,bottom:3,left:4},w={openPage:"OPEN_PAGE",backButton:"BACK_BUTTON",nextButton:"NEXT_BUTTON",navigation:"NAVIGATION"},L={unspecified:0,chrome:1,edge:2,local:3,firefox:4},y={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},R={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},A=5,N={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN"},C={translate:"translate",write:"write"},O={user:"USER",extension:"EXTENSION"},b={OPEN_TICKET:"OPEN_TICKET",DETECT_TICKET_LANGUAGE:"DETECT_TICKET_LANGUAGE",SWITCH_TICKET_LANGUAGE:"SWITCH_TICKET_LANGUAGE",ENABLE_AUTOTRANSLATE:"ENABLE_AUTOTRANSLATE",DISABLE_AUTOTRANSLATE:"DISABLE_AUTOTRANSLATE",TRANSLATE_MESSAGE:"TRANSLATE_MESSAGE",TRANSLATE_INPUT:"TRANSLATE_INPUT",ERROR:"ERROR"},D={translation:"TRANSLATION",login:"LOGIN"},k={chat:"CHAT",message:"MESSAGE"},P={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},x={free:"free",pro:"pro",none:"none"},v={TEXT_REFINEMENT_REQUEST:"TEXT_REFINEMENT_REQUEST",GDOCS_INSERT_COPY:"GDOCS_INSERT_COPY",GDOCS_DISCARD_COPY:"GDOCS_DISCARD_COPY",GDOCS_CHAR_LIMIT_REACHED:"GDOCS_CHAR_LIMIT_REACHED",RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},U={RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},G={ALTERNATIVES_OPENED:"ALTERNATIVES_OPENED",SEGMENTATION_SELECTED:"SEGMENTATION_SELECTED",ALTERNATIVE_SELECTED:"ALTERNATIVE_SELECTED"},F={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},M={ANONYMOUS_USER_LIMIT_EXCEEDED:"ANONYMOUS_USER_LIMIT_EXCEEDED",FREE_ACCOUNT_LIMIT_EXCEEDED:"FREE_ACCOUNT_LIMIT_EXCEEDED",WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:"WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:"WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED"},W={PRO_TRIAL:"PRO_TRIAL",LOGIN:"LOGIN",SIGNUP:"SIGNUP"},V={WORD:"word",SENTENCE:"sentence"},j={none:"None",pro:"Pro",free:"Free"},q={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function B(e,t){let n;try{switch(e){case q.chrome:case q.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case q.edge:n=t.split("Edg/")[1].split(" ")[0];break;case q.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case q.opera:n=t.split("OPR/")[1].split(" ")[0];break;case q.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===q.chrome||e===q.edge||e===q.brave||e===q.opera}(e)&&(n=H(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function H(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function X(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",a="unknown_browser_version";const r=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||H(q.edge),o=e.match(/firefox|fxios/i),s=e.match(/opr\//i)||H(q.opera),i=e.match(/safari/i),c=H(q.brave);t?(n=q.chrome,r&&(n=q.edge),s&&(n=q.opera),c&&(n=q.brave)):r?n=q.edge:o?n=q.firefox:s?n=q.opera:i&&(n=q.safari),a=B(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:a,browserLang:r}}function K(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.18.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.18.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild.toLowerCase()===q.firefox.toLowerCase();const e=chrome.runtime.getURL("");return X().browser===q.firefox||/moz-extension:\/\//gm.test(e)}const Y={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",customer_segmentation_survey_free:"CUSTOMER_SEGMENTATION_SURVEY_FREE",customer_segmentation_survey_pro:"CUSTOMER_SEGMENTATION_SURVEY_PRO",arabic_survey:"ARABIC_SURVEY"},$={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.typeform.com/to/MkMfP2Y6",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",CUSTOMER_SEGMENTATION_SURVEY_FREE:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",CUSTOMER_SEGMENTATION_SURVEY_PRO:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",ARABIC_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"};function z(e){const{destination:t,...n}=e;if(void 0!==t)switch(t){case Y.share_feedback_survey:return $.DOCS_GOOGLE_COM_FEEDBACK_FORM;case Y.new_share_feedback_survey:return $.NEW_FEEDBACK_FORM;case Y.try_DeepL_Pro:return n?.utmContent?Q($.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):$.DEEPL_COM_PRO;case Y.try_DeepL_Pro_Write:return n?.utmContent?Q($.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):$.DEEPL_COM_PRO_WRITE;case Y.show_more_translation:return n?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const a=new URL($.DEEPL_COM_TRANSLATOR);let r=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return a.hash=r,a.href}(n):void console.error("Invalid action.");case Y.deepl_translator_home:return n?.utmContent?Q($.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):$.DEEPL_COM_TRANSLATOR;case Y.deepl_write_home:return n?.utmContent?Q($.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):$.DEEPL_COM_WRITE;case Y.deepl_translator_docs:return n?.utmContent?Q($.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):$.DEEPL_COM_DOCTRANS;case Y.deepl_terms_of_service_free:return $.DEEPL_COM_TERMS_OF_SERVICE_FREE;case Y.shortcut_settings:return $.SHORTCUT_SETTINGS;case Y.support_article:return $.SUPPORT_ARTICLE;case Y.external.whatsapp:return $.EXTERNAL.WHATSAPP;case Y.external.twitter:return $.EXTERNAL.TWITTER;case Y.external.youtube:return $.EXTERNAL.YOUTUBE;case Y.external.facebook:return $.EXTERNAL.FACEBOOK;case Y.external.github:return $.EXTERNAL.GITHUB;case Y.external.discord:return $.EXTERNAL.DISCORD;case Y.external.telegram:return $.EXTERNAL.TELEGRAM;case Y.external.reddit:return $.EXTERNAL.REDDIT;case Y.external.gmail:return $.EXTERNAL.GMAIL;case Y.external.gdocs:return $.EXTERNAL.GDOCS;case Y.external.gslides:return $.EXTERNAL.GSLIDES;case Y.external.linkedIn:return $.EXTERNAL.LINKEDIN;case Y.external.msOffice:return $.EXTERNAL.MSOFFICE;case Y.deepl_support:return $.DEEPL_SUPPORT;case Y.chrome_write_a_review:return $.CHROME_WEBSTORE;case Y.edge_write_a_review:return $.EDGE_WEBSTORE;case Y.gmail_feedback_survey:return $.GMAIL_FEEDBACK_SURVEY;case Y.gslides_feedback_survey:return $.GSLIDES_FEEDBACK_SURVEY;case Y.firefox_write_a_review:return $.FIREFOX_WEBSTORE;case Y.firefox_feedback_survey:return $.FIREFOX_FEEDBACK;case Y.firefox_shortcut_docs:return $.FIREFOX_SHORTCUT_DOCS;case Y.deepl_create_account:if(n){let e=[];if(n.utmContent){e=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n.utmContent]]]}if(n.redirectToOnboarding&&!K()){const t=`${chrome.runtime.getURL("")}onboarding.html`;e.push(["redirectUri",t])}return Q($.DEEPL_CREATE_ACCOUNT,e)}return $.DEEPL_CREATE_ACCOUNT;case Y.customer_segmentation_survey_free:return $.CUSTOMER_SEGMENTATION_SURVEY_FREE;case Y.customer_segmentation_survey_pro:return $.CUSTOMER_SEGMENTATION_SURVEY_PRO;case Y.arabic_survey:return $.ARABIC_SURVEY;default:return}}function Z(e){const t=z(e),{openInSameTab:n}=e;if(!t)return;const a=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:a})})):chrome.tabs.create({url:a,active:!0})}function Q(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const J=()=>{let e=navigator.languages?navigator.languages[0].substr(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return o.map((e=>e.langCode)).includes(e)?e:"EN"},ee=()=>{const e={};return o.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),e[n]=0})),e},te=e=>e.substring(0,2).toUpperCase();const ne=e=>{let t=o.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=o.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)};const ae=()=>({settingSchemeVersion:37,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:o.reduce(((e,t)=>({...e,[t.langCode]:i})),{}),selectedTargetLanguage:J(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.18.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.DEEPL_PRO_API_KEY,installationId:n(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:ee(),languagePreferenceForReading:ee(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,regionalVariant:void 0,isSurveyLinkHidden:!1,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:V.SENTENCE,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,customizationsActiveStates:{[N.linkedIn]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1}),re={prod:"production",dev:"development",test:"testing"};function oe(){return re.prod}function se(){return oe()===re.dev}function ie(e){chrome.runtime.sendMessage({action:"dlTrackError",errorMessage:e})}const ce={PROTOCOL_ERROR:"PROTOCOL_ERROR",NETWORK_ERROR:"NETWORK_ERROR",FULL_PAGE_SERVER_ERROR:"FULL_PAGE_SERVER_ERROR",USER_UNAUTHORIZED:"-32003",USER_BLOCKED:"429",FORBIDDEN_REQUEST:"403",QUOTA_HAS_BEEN_REACHED:"1045601",TOO_MANY_REQUESTS:"1042902"},le={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},de="INSTALLATION_ERROR",ge="TRANSLATED_INPUT_NOT_SET",ue="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",pe="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",he="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",me="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Te="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED";class Ee extends Error{constructor(e){super(e),this.name=ce.PROTOCOL_ERROR,this.message=e}}class _e extends Error{constructor(e){super(e),this.name=ce.FULL_PAGE_SERVER_ERROR,this.message=e}}class fe extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class Se extends Error{constructor(e,t){super(t),this.name=ue,this.limit=e,this.message=t}}class Ie extends Error{constructor(e,t){super(t),this.name=pe,this.limit=e,this.message=t}}class we extends Error{constructor(e,t){super(t),this.name=me,this.limit=e,this.message=t}}class Le extends Error{constructor(e,t){super(t),this.name=Te,this.limit=e,this.message=t}}class ye extends Error{constructor(e,t){super(t),this.name=he,this.limit=e,this.message=t}}class Re extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function Ae(e){try{ie(`${e.name} ${e.message}`),console.error(e.name,e.message)}catch(e){console.error(e)}return{error:e.name}}function Ne(){return{url:"https://s.deepl.com/chrome/statistics"}}function Ce(e){switch(e){case c.manual:return 1;case c.automatic:return 2;case c.inline:return 3;case c.input:return 4;default:return 0}}function Oe(e){switch(e){case le.ENTRY_NOT_FOUND:return 1;case le.SERVER_ERROR:return 2}}function be(e){switch(e){case u.defaultPopup:return p.extensionIcon;case u.fptInjectedPopup:return p.fptAutoInject;default:return 0}}function De(e){switch(e){case u.defaultPopup:return h.defaultPopup;case u.fptInjectedPopup:return h.injectedFptPopup;case u.inlineTooltipPopup:return h.inlinePopup;default:return 0}}function ke(e){return e===m.hintKeyboardShortcut?1:0}function Pe(e){switch(e){case T.inputTranslationTriggerIcon:return 1;case T.inlineTranslationTriggerIcon:return 2;case T.inlineTranslationSettingPopup:return 3;case T.inputTranslationSettingPopup:return 4;case T.settingsPageFPT:return 5;case T.settingsPageReading:return 6;case T.settingsPageWriting:return 7;case T.fptHideModal:return 8;case T.inputTranslationSettingsIcon:return 9;case T.inlineTranslationSettingsIcon:return 10;case T.inputTranslationReadMoreLink:return 11;case T.inlineTranslationReadMoreLink:return 12;case T.fptTranslationReadMoreLink:return 13;case T.extensionHubToggleSwitch:return 14;case T.hubCustomizeShortcut:return 15;case T.hubLoginButton:return 16;case T.hubUpgradeToProLink:return 17;case T.hubTryProLink:return 18;case T.settingsPageCustomizeShortcutButton:return 19;case T.hubFPTEnableCheckbox:return 20;case T.hubFPTDisableCheckbox:return 21;case T.deeplWriteIcon:return 22;case T.hubViewIntegrations:return 23;case T.hubCloseCustomizationsWidget:return 24;case T.gmailOnboardingPopup:return 25;case T.gmailOnboardingIcon:return 26;case T.gmailCharLimitLogin:return 27;case T.gmailFeedbackSurvey:return 28;case T.gslidesFeedbackSurvey:return 29;case T.gslidesCharLimitLogin:return 30;case T.zendeskTryProLink:return 31;case T.settingsPageIntegrations:return 32;case T.onboardingSignUp:return 33;case T.onboardingSkipSignUp:return 34;case T.onboardingLoginLink:return 35;case T.onboardingSeeAllIntegrations:return 36;case T.inputImproveTriggerIcon:return 37;case T.iconToggleInHubTranslator:return 38;case T.iconToggleInHubWrite:return 39;case T.manageIconSettings:return 40;case T.writeLanguageSwitchedInHub:return 41;case T.writeLanguageSwitchedInSettings:return 42;default:return 0}}function xe(e){return e===E.triggerTranslation?1:0}function ve(e){switch(e){case _.clickOnShortcutNotifiction:return 60011;case _.clickOnInlineTranslationShowAlternatives:return 60026;case _.clickOnInlineTranslationCloseIcon:return 60027;case _.clickOnLogoutMenuEntry:return 60028;default:return 0}}function Ue(e){switch(e){case S.inputTranslation:return 1;case S.inlineTranslation:return 2;case S.fullPageTranslation:return 3;default:return 0}}function Ge(e){switch(e){case f.disableEverywhere:return 1;case f.disablePerSite:return 2;case f.enableEverywhere:return 3;case f.enablePerSite:return 4;default:return 0}}function Fe(e){switch(e){case"top":return I.top;case"right":return I.right;case"bottom":return I.bottom;case"left":return I.left;default:return 0}}function Me(e){switch(e){case Y.shortcut_settings:return $.SHORTCUT_SETTINGS;case Y.support_article:return $.SUPPORT_ARTICLE;case Y.external.whatsapp:return $.EXTERNAL.WHATSAPP;case Y.external.twitter:return $.EXTERNAL.TWITTER;case Y.external.youtube:return $.EXTERNAL.YOUTUBE;case Y.external.facebook:return $.EXTERNAL.FACEBOOK;case Y.external.github:return $.EXTERNAL.GITHUB;case Y.external.discord:return $.EXTERNAL.DISCORD;case Y.external.telegram:return $.EXTERNAL.TELEGRAM;case Y.external.reddit:return $.EXTERNAL.REDDIT;case Y.external.gmail:return $.EXTERNAL.GMAIL;case Y.external.gdocs:return $.EXTERNAL.GDOCS;case Y.external.gslides:return $.EXTERNAL.GSLIDES;case Y.external.msOffice:return $.EXTERNAL.MSOFFICE;default:return""}}function We(e){switch(e){case w.openPage:return 1;case w.backButton:return 2;case w.nextButton:return 3;case w.navigation:return 4;default:return 0}}function Ve(e){switch(e){case y.chrome:return L.chrome;case y.edge:return L.edge;case y.firefox:return L.firefox;case y.local:return L.local;default:return L.unspecified}}function je(e){return R[e]||0}function qe(e){switch(e){case N.default:return 1;case N.gdocs:return 2;case N.whatsappWeb:return 3;case N.twitter:return 4;case N.zendesk:return 5;case N.gmail:return 6;case N.gslides:return 7;case N.linkedIn:return 8;default:return 0}}function Be(e){switch(e){case 60026:case 60027:return!0;default:return!1}}function He(e){switch(e){case O.user:return 1;case O.extension:return 2;default:return 0}}function Xe(e){switch(e){case D.translation:return 1;case D.login:return 2;default:return 0}}function Ke(e){switch(e){case k.message:return 1;case k.chat:return 2;default:return 0}}function Ye(e){switch(e){case x.free:return 1;case x.pro:return 2;case x.none:return 3;default:return 0}}function $e(e){switch(e){case F.READING_VIEW_TRANSLATE:return 1;case F.COMPOSE_VIEW_TRANSLATE:return 2;case F.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function ze(e){switch(e){case M.ANONYMOUS_USER_LIMIT_EXCEEDED:return 1;case M.FREE_ACCOUNT_LIMIT_EXCEEDED:return 2;case M.WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:return 3;case M.WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:return 4;default:return 0}}function Ze(e){switch(e){case C.translate:return 1;case C.write:return 2;default:return 0}}function Qe(e){switch(e){case W.LOGIN:return 1;case W.SIGNUP:return 2;case W.PRO_TRIAL:return 3;default:return 0}}function Je(e){switch(e){case V.WORD:return 1;case V.SENTENCE:return 2;default:return 0}}function et(e){switch(e){case j.none:return 1;case j.pro:return 2;case j.free:return 3;default:return 0}}async function tt(e){let t,n,a,r,o,s,i,c,d,g=!1;try{const e=await Rn(["session","installationId"]);n=e.session.id,t=e.installationId}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await Fn();g=!!e.accountId,a=Ye(e.translatorServiceType),r=Ye(e.apiServiceType),o=Ye(e.docTranslatorServiceType),d=Ye(e.writeServiceType),i=g?2===a||2===r||2===d||2===o?l.loggedInPro:l.loggedInFree:l.notLoggedIn,c=e.sessionType?et(e.sessionType):et(j.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{s=await Wn()}catch(e){console.error(e)}const u=X(),p=await jn(),h={eventId:void 0,extensionVersion:"1.18.0",sessionId:n,sessionType:c,installationId:t,browserInstanceId:s,originStore:Ve(chrome.runtime.id),userInfos:{userType:i,translatorServiceType:a,apiServiceType:r,docTranslatorServiceType:o,writeServiceType:d},userAgent:u.userAgent,platform:u.platform,browser:u.browser,browserVersion:u.browserVersion,browserLang:u.browserLang,clientExperiments:p},m=e?e(h):h;return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(m)}).then((e=>{e.ok||console.log(`DAP ${m.eventId} request failed: ${e}`)}))}async function nt(e){return tt((t=>({...t,eventId:60001,translationRequestData:{extensionVersion:"1.18.0",domainName:e.domainName,userId:e.installationId,translationTrigger:Ce(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},...e.translationPerformance&&{translationPerformance:e.translationPerformance},nicheIntegration:qe(e.nicheIntegration||N.default),...e.isGlossaryEnabled&&{isGlossaryEnabled:e.isGlossaryEnabled}}})))}async function at(e){return tt((t=>({...t,eventId:60002,errorData:{extensionVersion:"1.18.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}async function rt(e){return tt((t=>({...t,eventId:60003,translationErrorData:{errorData:{extensionVersion:"1.18.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:Ce(e.trigger),nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function ot(e){return tt((t=>({...t,eventId:60004,contentScriptErrorData:{errorData:{extensionVersion:"1.18.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}async function st(e){return tt((t=>({...t,eventId:60005,inputInjectionData:{extensionVersion:"1.18.0",domainName:e.domainName}})))}async function it(e){return tt((t=>({...t,eventId:60007,extensionOpenedData:{extensionVersion:"1.18.0",domainName:e.domainName,extensionOpenedFrom:e.extensionOpenedFrom}})))}async function ct(e){return tt((t=>({...t,eventId:60008,logoClickedData:{extensionVersion:"1.18.0",logoClickedFrom:e.logoClickedFrom}})))}async function lt(e){return tt((t=>({...t,eventId:60009,notificationViewedData:{extensionVersion:"1.18.0",notificationType:ke(e.notificationType)}})))}async function dt(e){return tt((t=>({...t,eventId:60010,shortcutUsedData:{shortcutType:xe(e.shortcutType),uiLocation:Pe(e.location),shortcut:e.shortcut,nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function gt(e){const t={eventId:ve(e.uiAction)};return Be(t.eventId)&&(t.payload={nicheIntegration:qe(e.nicheIntegration||N.default)}),tt((e=>({...e,...t})))}async function ut(){return tt((e=>({...e,eventId:60012})))}async function pt(){return tt((e=>({...e,eventId:60013})))}async function ht(e){return tt((t=>({...t,eventId:60014,inlineSettingOpenedData:{uiFunction:Ue(e.uiFunction),uiLocation:Pe(e.uiLocation),nicheIntegration:qe(e.nicheIntegration)}})))}async function mt(e){return tt((t=>({...t,eventId:60015,settingChangedData:{settingType:Ge(e.settingType),uiFunction:Ue(e.uiFunction),uiLocation:Pe(e.uiLocation),domainName:e.domainName}})))}async function Tt(e){return tt((t=>({...t,eventId:60016,detectLanguageData:{domainName:e.domainName,language:e.language}})))}async function Et(e){return tt((t=>({...t,eventId:60017,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}async function _t(e){return tt((t=>({...t,eventId:60018,inlinePositionChangeData:{newPosition:Fe(e.newPosition)}})))}async function ft(e){return tt((t=>({...t,eventId:60019,inlineDragStartData:{nicheIntegration:qe(e?.nicheIntegration||N.default)}})))}async function St(e){return tt((t=>({...t,eventId:60020,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:Ke(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}async function It(e){return tt((t=>({...t,eventId:60021,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:Ke(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}async function wt(e){return tt((t=>({...t,eventId:60057,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}async function Lt(e){return tt((t=>({...t,eventId:60022,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:Pe(e.uiLocation)}})))}async function yt(e){return tt((t=>({...t,eventId:60023,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function Rt(e){return tt((t=>({...t,eventId:60024,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function At(e){return tt((t=>({...t,eventId:60025,iconHoverData:{uiLocation:Pe(e.uiLocation),domainName:e.domainName,nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function Nt(e){return tt((t=>({...t,eventId:60029,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:We(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}async function Ct(e){return tt((t=>({...t,eventId:60030,onboardingOpenExternalPageData:{url:Me(e.url)}})))}async function Ot(e){return tt((t=>({...t,eventId:60031,readMoreClickedData:{uiLocation:Pe(e.uiLocation)}})))}async function bt(e){return tt((t=>({...t,eventId:60032,landOnWebsiteData:{website:je(e.website)}})))}async function Dt(e){return tt((t=>({...t,eventId:60033,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,nicheIntegration:qe(e.nicheIntegration||N.default)}})))}async function kt(e){return tt((t=>({...t,eventId:60034,openInputHighlighterData:{domainName:e.domainName}})))}async function Pt(e){return tt((t=>({...t,eventId:60035,closeInputHighlighterData:{trigger:e.trigger}})))}async function xt(e){return tt((t=>({...t,eventId:60036,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}async function vt(){return tt((e=>({...e,eventId:60037})))}async function Ut(e){return tt((t=>({...t,eventId:60038,openInputHighlighterData:{domainName:e.domainName}})))}async function Gt(e){return tt((t=>({...t,eventId:60039,closeInputHighlighterData:{trigger:e.trigger}})))}async function Ft(e){return tt((t=>({...t,eventId:60040,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}async function Mt(){return tt((e=>({...e,eventId:60041})))}async function Wt(){return tt((e=>({...e,eventId:60042})))}async function Vt(e){return tt((t=>({...t,eventId:60043,errorData:{lingueeError:Oe(e.error)}})))}async function jt(e,t){let n;switch(e){case b.OPEN_TICKET:n=60044;break;case b.DETECT_TICKET_LANGUAGE:n=60045;break;case b.SWITCH_TICKET_LANGUAGE:n=60046;break;case b.ENABLE_AUTOTRANSLATE:n=60047;break;case b.DISABLE_AUTOTRANSLATE:n=60048;break;case b.TRANSLATE_MESSAGE:n=60049;break;case b.TRANSLATE_INPUT:n=60050;break;case b.ERROR:n=60051;break;default:return}return tt((e=>({...e,eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}async function qt(e){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=60084:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=60085),t)return tt((e=>({...e,eventId:t})))}async function Bt(){return tt((e=>({...e,eventId:60054})))}async function Ht(e){const t=Math.round(await Un()/60);return tt((n=>({...n,eventId:60055,logoutData:{trigger:He(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}async function Xt(e){return tt((t=>({...t,eventId:60052,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Kt(e){return tt((t=>({...t,eventId:60053,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Yt(e){return tt((t=>({...t,eventId:60056,sessionTypeData:{sessionType:e.sessionType,trigger:Xe(e.trigger)}})))}async function $t(e){let t="";try{t=await kn()}catch(e){console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return tt((n=>({...n,eventId:60058,onboardingModalShownData:{nicheIntegration:qe(e.nicheIntegration||N.default),sessionType:t}})))}async function zt(e){return tt((t=>({...t,eventId:60059,UILocationClickedData:{uiLocation:Pe(e)}})))}async function Zt(){return tt((e=>({...e,eventId:60060})))}async function Qt(){return tt((e=>({...e,eventId:60061})))}async function Jt(e,t){let n;switch(e){case v.TEXT_REFINEMENT_REQUEST:n=60062;break;case v.GDOCS_INSERT_COPY:n=60063;break;case v.GDOCS_DISCARD_COPY:n=60064;break;case v.GDOCS_CHAR_LIMIT_REACHED:n=60065;break;case v.ERROR:n=60066;break;case v.RESULT_ACCEPTED:n=60071;break;case v.RESULT_REVERTED:n=60072;break;default:return}return tt((e=>({...e,eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:qe(t.nicheIntegration||N.default),error:t.error}})))}async function en(){if(!await Dn())return;const e=await Vn();return tt((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}async function tn(){const e=await Vn();return tt((t=>({...t,eventId:60068,accountData:{accountUuid:e}})))}async function nn(){const e=await Vn();return tt((t=>({...t,eventId:60069,accountData:{accountUuid:e}})))}async function an(e,t){let n;switch(e){case U.RESULT_ACCEPTED:n=60073;break;case U.RESULT_REVERTED:n=60074;break;default:return}return tt((e=>({...e,eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:qe(t.nicheIntegration||N.default),error:t.error}})))}async function rn(e){return tt((t=>({...t,eventId:60070,customizationOnOffData:{nicheIntegration:qe(e.nicheIntegration||N.default),uiLocation:Pe(e.location),customizationEnabled:e.customizationEnabled}})))}async function on(e){return tt((t=>({...t,eventId:60075,gmailCharLimitReachedData:{gmailActionType:$e(e.type)}})))}async function sn(e){return tt((t=>({...t,eventId:60076,upgradeNotificationDisplayedData:{type:ze(e)}})))}async function cn(e){return tt((t=>({...t,eventId:60077,upgradeNotificationClosedData:{type:ze(e)}})))}async function ln(e,t){return tt((n=>({...n,eventId:60078,upgradeNotificationActionData:{type:ze(e),action:Qe(t)}})))}async function dn(e,t){let n;switch(e){case G.ALTERNATIVES_OPENED:n=60079;break;case G.SEGMENTATION_SELECTED:n=60080;break;case G.ALTERNATIVE_SELECTED:n=80081;break;default:return}return tt((e=>({...e,eventId:n,alternativesMetaData:{sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:qe(t.nicheIntegration||N.default),contentProcessingMode:Ze(t.contentProcessingMode),...t.alternativesSegmentation&&{alternativesSegmentation:Je(t.alternativesSegmentation)}}})))}async function gn(e,t){const n=e?60082:60083;return tt((e=>({...e,eventId:n,glossaryMetadata:{nicheIntegration:qe(t.nicheIntegration||N.default)}})))}async function un(e){return tt((t=>({...t,eventId:60086,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:Ce(e.trigger),nicheIntegration:qe(e.nicheIntegration||N.default)}})))}let pn;const hn="dlBrowserExtension",mn="dlCache";function Tn(){return new Promise(((e,t)=>{let n=indexedDB.open(hn,1);n.onerror=function(){t("Error creating database.")},n.onsuccess=function(t){pn=t.target.result,e()},n.onupgradeneeded=function(t){pn=t.target.result,pn.objectStoreNames.contains(mn)||pn.createObjectStore(mn,{keyPath:"id"}),e()}}))}async function En(e,t,n){return pn||await Tn(),new Promise(((a,r)=>{let o=pn.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});o.onsuccess=function(){a()},o.onerror=function(e){r(e)}}))}async function _n(e,t){return pn||await Tn(),new Promise(((n,a)=>{let r=pn.transaction(t,"readonly").objectStore(t).get(e);r.onerror=function(e){a(e)},r.onsuccess=function(){r.result?n(r.result):n(null)}}))}function fn(e){return En("dlclientstate",e,mn)}async function Sn(){const e=await _n("dlclientstate",mn);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}function In(e){return En("dlexperiments",e,mn)}async function wn(){try{const e=await _n("dlexperiments",mn);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}async function Ln(){const e=await _n("dlexperiments",mn);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>9||!e.data||0===e.data.length?void 0:e.data}const yn=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(P).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return x.free;switch(t){case P.TRANSLATOR:return e.translatorServiceType;case P.WRITE:return e.writeServiceType;case P.API:return e.apiServiceType;case P.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===x.pro;async function Rn(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await An()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(a=>{a?t(a):n(`Can not get ${e}`)}))}))}async function An(){const e=n();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await en()}catch(e){console.error(e)}}async function Nn(){const{session:e}=await Rn(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?await An():await chrome.storage.sync.set({session:{...e,timestamp:Date.now()}})}async function Cn(e,t,n){const a=r(e);return await chrome.storage.local.set({a_t:e,r_t:t,i_t:n,isLoggedIn:!(!e||!t),isProUser:!(!a||"Pro"!==a.sessionType),sessionType:a?.sessionType}),a?.sessionType}async function On(){await chrome.storage.local.remove(["a_t","r_t","i_t"]),await chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}async function bn(){const e=await chrome.storage.local.get(["a_t","r_t","i_t"]);return{access_token:e?e.a_t:void 0,refresh_token:e?e.r_t:void 0,id_token:e?e.i_t:void 0}}async function Dn(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}async function kn(){const e=await chrome.storage.local.get(["sessionType"]);return e?.sessionType}async function Pn(){return(await chrome.storage.sync.get(["installationId"])).installationId}async function xn(){await chrome.storage.local.set({last_login:Date.now()})}async function vn(){await chrome.storage.local.remove(["last_login"])}async function Un(){const e=await chrome.storage.local.get(["last_login"]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}async function Gn(e){const t=e.featureSet.translator.service,n=e.featureSet.write.service,a=e.featureSet.api.service,r=e.featureSet.documentTranslation.service;let o,s;e.loginState?.accountId&&(o=e.loginState.accountId),e.featureSet?.integrations?.browserExtension&&(s=e.featureSet?.integrations?.browserExtension),await chrome.storage.local.set({translatorServiceType:t,writeServiceType:n,apiServiceType:a,docTranslatorServiceType:r,accountId:o||"",featureSet:s})}async function Fn(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","accountId"])}async function Mn(){await chrome.storage.local.set({browserInstanceId:n()})}async function Wn(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}async function Vn(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=r(e.a_t),n=r(e.i_t);return t.sub||n.sub}}async function jn(){let e=[];try{e=await wn()}catch(e){}if(!e||0===e.length)return[];return e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})))}async function qn(e="translatorServiceType"){const t=await Fn(),n=!!t.accountId,a=t[e];return n?a===x.pro?l.loggedInPro:l.loggedInFree:l.notLoggedIn}async function Bn(e="translatorServiceType"){const t=await qn(e);let n;switch(e){case"translatorServiceType":default:n=d;break;case"writeServiceType":n=g}switch(t){case l.notLoggedIn:return n.notLoggedIn;case l.loggedInFree:return n.loggedInFree;case l.loggedInPro:return;default:n.notLoggedIn}}async function Hn(e){const t=await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"]);return yn(t,e)}async function Xn(){return await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"])}async function Kn(e=!1){if(!e){let e;try{e=await Ln()}catch(e){}if(e)return e}const t=await Pn();if(!t)throw new Error("Installtion ID is not valid");let n=[];try{n=await wn()}catch(e){}const a=`https://s.deepl.com/chrome/experiments/${t}`;let r;try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n)});if(r=(await e.json()).client_experiments,!r)return n;try{In(r)}catch(e){}return r}catch(e){return n}}const Yn={ACCESS_DENIED:"ACCESS_DENIED",INVALID_REQUEST:"INVALID_REQUEST",INVALID_GRANT:"INVALID_GRANT",GET_TOKEN_ERROR:"GET_TOKEN_ERROR",INVALID_NONCE:"INVALID_NONCE"};class $n extends Error{constructor(e,t){super(e),this.name=Yn.ACCESS_DENIED,this.message=e,this.httpStatusCode=t}}class zn extends Error{constructor(e,t){super(e),this.name=Yn.INVALID_REQUEST,this.message=e,this.httpStatusCode=t}}class Zn extends Error{constructor(e,t){super(e),this.name=Yn.INVALID_GRANT,this.message=e,this.httpStatusCode=t}}class Qn extends Error{constructor(e,t){super(e),this.name=Yn.GET_TOKEN_ERROR,this.message=e,this.httpStatusCode=t}}class Jn extends Error{constructor(e){super(e),this.name=Yn.INVALID_NONCE,this.message=e}}function ea(e,t){const n=e.split("?")[1];if(n){var a=n.split("&");for(let e=0;e<a.length;e++){const n=a[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}}async function ta(e,t,n="https://test.deepl.com/oidc-login"){const r=a(),o=a(),s=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",s],["code_challenge_method","S256"],["nonce",r]]),nonce:r,codeVerifier:o}}function na(e,t){if(200!==e){if("invalid_request"===t.error)throw new zn(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new Zn(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);throw new Qn(`dl-oidc (get tokens): http status: ${e}`,e)}}async function aa(e,t="https://deepl.com/oidc/token"){const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),a=await n.json();return na(n.status,a),a.access_token}async function ra(e,t,n=!1){let a=t.access_token;async function r(){return await fetch(e,{...t,headers:{...t.headers,Authorization:a?`Bearer ${a}`:"None"}})}n&&a&&(a=await aa(t.refresh_token,t.token_url));let o=await r();return 401!==o.status&&403!==o.status||(a=await aa(t.refresh_token,t.token_url),o=await r()),{response:o,accessToken:a}}function oa(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}async function sa(e=!1,n=!0){if(!e){const e=await Sn();if(e)return e}const a=oa("getClientState",{v:"20180814"},t()),o=await bn(),s=n||function(e){try{const t=r(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(o.access_token),{response:i,accessToken:c}=await ra("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a),access_token:o.access_token,refresh_token:o.refresh_token,token_url:"https://w.deepl.com/oidc/token"},s);await Cn(c,o.refresh_token,o.id_token);const l=(await i.json()).result;return l&&(fn(l),Gn(l)),l}async function ia(e=!1){const t=async()=>{const t=await ta("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return new Promise(((n,a)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(async e=>{if(!e){const e=chrome.runtime.lastError.message;return console.error("response url undefined",e),ie(`login - response url undefined. ${e}`),/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)?n():a()}try{const a=await async function(e,t,n,a,o,s="https://deepl.com/oidc/token"){const i=ea(n,"code");if(!i){const e=ea(n,"error");if("access_denied"===e)throw new $n("dl-oidc (get tokens): access denied - undefined code");if("invalid_request"===e)throw new zn("dl-oidc (get tokens): invalid request - undefined code")}const c=await fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:e,code_verifier:o,code:i,grant_type:"authorization_code",redirect_uri:t})}),l=await c.json();if(na(c.status,l),r(l.id_token).nonce!==a)throw new Jn("dl-oidc (get tokens): invalid nonce");return l}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token"),o=await Cn(a.access_token,a.refresh_token,a.id_token);try{await sa(!0,!1),Bt(),tn(),o&&await Yt({sessionType:o,trigger:"LOGIN"})}catch(e){console.error(e)}await xn(),n()}catch(e){console.error(e);try{at({errorCode:e.name,errorMessage:e.message})}catch(e){console.error(e)}a(e)}}))}))};try{await t()}catch(e){ia(!0)}}async function ca(e){const t=await bn(),n=new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]]),a=async()=>{await vn();try{await nn()}catch(e){console.error(e)}await On();try{await Ht({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}await sa(!0),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))};if(!t.id_token)return void await a();const r=`https://www.deepl.com/auth/logout?${n}`;chrome.identity.launchWebAuthFlow({url:r,interactive:!0},(()=>{a()}))}async function la(e,t,n,a){const r=await bn(),o=await Hn(P.TRANSLATOR),s=await Hn(P.WRITE);let i=r&&r.access_token&&o?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0";a&&(i=r&&r.access_token&&s?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0");try{const{response:a,accessToken:o}=await ra(i,{method:"POST",headers:{"Content-Type":t},body:e,access_token:r.access_token,refresh_token:r.refresh_token,token_url:"https://w.deepl.com/oidc/token"}),s=await Cn(o,r.refresh_token,r.id_token);if(s)try{await Yt({sessionType:s,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await sa(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let a;try{a=JSON.parse(e)}catch(e){throw 200===t?new Ee("JSON_RPC: Parsing of response object failed"):t>=500&&n?new _e(`FPT failed: Http status code ${t}`):new fe(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==a.jsonrpc||void 0!==a.result&&200!==t||void 0===a.result&&void 0===a.error)throw new Ee("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(a.error){const e=a.error;if(void 0===e.code)throw new Ee('JSON_RPC: Missing field "code" in error response');throw new fe(e.code.toString(),e.message)}if(200!==t)throw new fe(t.toString(),`Http status code ${t}`);return a}(await a.text(),a.status,n);return{data:c,status:a.status}}catch(e){throw e.name!==Yn.ACCESS_DENIED&&e.name!==Yn.INVALID_REQUEST&&e.name!==Yn.INVALID_GRANT&&e.name!==ce.USER_UNAUTHORIZED&&e.name!==ce.FORBIDDEN_REQUEST||setTimeout((()=>{ca({trigger:O.extension,reason:e.name})}),5e3),e}}async function da(e,t,n=(e=>e),a,r,o){const s=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,a),i=n(JSON.stringify(s),s);return(await la(i,"application/json; charset=utf-8",r,o)).data.result}async function ga(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await qn()}catch(e){t=l.notLoggedIn,console.log(e)}const a=e.nicheIntegration===N.default||e.nicheIntegration===N.gmail||e.nicheIntegration===N.gslides||!e.nicheIntegration,r=await Hn(P.TRANSLATOR),o=await Hn(P.WRITE);if((!r||!o)&&a){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),a=e.isWriteRequest?"writeServiceType":"translatorServiceType",s=await Bn(a);if(e.isWriteRequest){if(r&&!o&&n>s)throw new Le(s,"Char limit exceeded (Translator Pro, Write Free)");if(!o&&n>s)throw new we(s,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===l.loggedInFree&&o&&n>s)throw new ye(s,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===l.loggedInFree&&n>s)throw new Se(s,"Char limit exceeded (Translator Free)");if(t===l.notLoggedIn&&n>s)throw new Ie(s,"Char limit exceeded (Translator Anon)")}}let s=e.sourceTexts;const i=["EN-US","EN-GB","PT-PT","PT-BR"].includes(e.targetLangCode?.toUpperCase());let c=e.targetLangCode?.toUpperCase();i&&(c=e.targetLangCode?.toUpperCase().slice(0,2));const d={texts:e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):s.map((e=>({text:e}))),...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:c,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:e.regionalVariant&&i?e.regionalVariant:void 0,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let g=1;const u=Date.now();s.forEach((e=>g+=(e.match(/[i]/g)||[]).length)),d.timestamp=u-u%g+g;const p=await da("LMT_handle_texts",d,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:p.texts.map((e=>e.text)),sourceLang:p.lang.toUpperCase(),detectedLanguages:p.detectedLanguages}}const ua=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);async function pa(e){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return ua.get(n)}(ha(e.sourceLang),ha(e.targetLang)),n=encodeURIComponent(e.text),a=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let r=async function(e){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new Re(le.ENTRY_NOT_FOUND)):(console.error("Dictionary Server Error"),new Re(le.SERVER_ERROR));{try{t=await e.text()}catch(e){throw new Re(le.SERVER_ERROR)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}(await fetch(a));return r}function ha(e){return["EN-US","EN-GB","PT-PT","PT-BR"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":e:e}function ma(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const Ta="PROTOCOL_ERROR",Ea="FULL_PAGE_SERVER_ERROR",_a="-32003",fa="403";class Sa extends Error{constructor(e){super(e),this.name=Ta,this.message=e}}class Ia extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class wa extends Error{constructor(e){super(e),this.name=Ea,this.message=e}}function La(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function ya(e,t){return{jsonrpc:"2.0",method:e,params:t,id:La()}}const Ra={TRANSLATE:"translate",WRITE:"write"},Aa="pro",Na="LMT_split_text",Ca="LMT_handle_jobs",Oa="getTermbases";const ba=async({mode:e,texts:t,config:n,sourceLang:a="auto",queryParameter:r})=>{const o=await Pa(n,e),s=r?`${o}&method=${Na}&${r}`:`${o}&method=${Na}`,i=ya(Na,{commonJobParams:{mode:e},lang:{lang_user_selected:a},texts:t});return await ka(s,{method:"POST",headers:{"Content-Type":"application/json"},body:va(i)},n)},Da=async({mode:e,jobs:t,sourceLang:n,targetLang:a,config:r,textType:o,formality:s,termbase:i,queryParameter:c})=>{const l=await Pa(r,e),d=c?`${l}&method=${Ca}&${c}`:`${l}&method=${Ca}`,g=ya(Ca,{commonJobParams:{mode:e,...o&&{textType:o},...s&&{formality:s},...i&&{termbase:i}},lang:{source_lang_computed:n,target_lang:a},jobs:t,priority:1,timestamp:xa(t)});return await ka(d,{method:"POST",headers:{"Content-Type":"application/json"},body:va(g)},r)},ka=async(e,t,n)=>{const a=await n.auth.getAuthTokens(),r=a?{access_token:a.access_token,refresh_token:a.refresh_token,token_url:n.auth.tokenUrl}:{},{response:o,accessToken:s}=await ra(e,{...t,...r});return await n.auth.setAuthTokens(s,a.refresh_token,a.id_token),await Ua({response:o,isHtml:!1})},Pa=async({auth:e,baseUrls:t,isTermbase:n},a)=>{const r=await e.getAuthTokens(),o=a===Ra.WRITE?t.write:t.translate;if(n)return t.glossary;if(!r||!r.access_token)return o.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(r.access_token),t=e&&"Pro"===e.sessionType;return r.access_token&&t?o.pro:o.free}{const t=await e.getServiceLevels();switch(a){case Ra.WRITE:return t.write===Aa?o.pro:o.free;case Ra.TRANSLATE:return t.translator===Aa?o.pro:o.free;default:return o.free}}},xa=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const a=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),a-a%n+n},va=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},Ua=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new Ia(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new Sa("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new wa(`FPT failed: Http status code ${e.status}`):new Ia(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new Sa("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new Sa('JSON_RPC: Missing field "code" in error response');throw new Ia(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new Ia(e.status.toString(),`Http status code ${e.status}`);return n},Ga=Ra;async function Fa({texts:e,mode:t=Ra.TRANSLATE,targetLang:n}){return ja((async a=>await async function({texts:e,mode:t=Ra.TRANSLATE,targetLang:n,config:a}){const r=await ba({mode:t,texts:e,config:a}),o=r.result.texts[0].chunks.map(((e,n,a)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<a.length-1&&a.length>1?[a[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[a[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===Ra.WRITE&&{write_variant_requests:["main","variants"]}})));return await Da({mode:t,jobs:o,sourceLang:r.result.lang.detected,targetLang:t===Ra.WRITE?r.result.lang.detected:n,config:a})}({texts:e,mode:t,targetLang:n,config:a})))}const Ma=async({mode:e,texts:t,sourceLang:n="auto"})=>ja((async a=>await ba({mode:e,texts:t,sourceLang:n,config:a}))),Wa=async({mode:e,jobs:t,sourceLang:n,targetLang:a,textType:r,formality:o,termbase:s})=>ja((async i=>await Da({mode:e,jobs:t,sourceLang:n,targetLang:a,config:i,textType:r,formality:o,termbase:s}))),Va=async()=>ja((async e=>await(async({config:e})=>{const t=`${await Pa({...e,isTermbase:!0})}&method=${Oa}`,n=ya(Oa);return await ka(t,{method:"POST",headers:{"Content-Type":"application/json"},body:va(n)},e)})({config:e}))),ja=async e=>{try{return await e(qa())}catch(e){throw e.name!==Yn.ACCESS_DENIED&&e.name!==Yn.INVALID_REQUEST&&e.name!==Yn.INVALID_GRANT&&e.name!==_a&&e.name!==fa||setTimeout((()=>{ca({trigger:O.extension,reason:e.name})}),5e3),e}},qa=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0"},auth:{getAuthTokens:bn,setAuthTokens:Cn,getServiceLevels:async()=>{const e=await Xn();return{translator:e.translatorServiceType,write:e.writeServiceType}},tokenUrl:"https://w.deepl.com/oidc/token"}});async function Ba(e){const t=await Rn(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function Ha(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=new Date,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),isHtml:!0,sourceTexts:e.payload.texts,regionalVariant:n.regionalVariant};let o;try{o=await ga(r)}catch(t){try{rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.sourceLang,trigger:e.payload.trigger,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}Fr(e?.payload?.sourceLang,n?.selectedTargetLanguage);const s={isFirstTime:e.payload.isFirstTime,processingTimeInMs:new Date-a};try{nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:s,domainName:e.payload.domainName})}catch(e){console.error(e)}return o.texts}async function Xa(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","languagePreferenceForReading","regionalVariant"]),a=e.payload.nicheIntegration||N.default,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:n.languagePreferenceForReading,splitting:"newlines",regionalVariant:n.regionalVariant,nicheIntegration:a,isWriteRequest:e.payload.isWriteRequest};let o;try{o=await ga(r)}catch(t){try{e.payload.isWriteRequest?Jt(v.ERROR,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:a,error:t.name}):rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Fr(o?.sourceLang,n?.selectedTargetLanguage),e.payload.platformBehavior===N.gslides&&co();try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(n.languagePreferenceForReading[e]||0===n.languagePreferenceForReading[e])&&(n.languagePreferenceForReading[e]=ma(n.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:n.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?Jt(v.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:o.texts.reduce(((e,t)=>e+t.length),0),nicheIntegration:a}):nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:o.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a})}catch(e){console.error(e)}return o.texts.map((e=>({text:e,detected_source_language:o.sourceLang})))}async function Ka(e){await Nn();const n=await Rn(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting","regionalVariant"]),a=e.payload.requests,r=e.payload.targetLang||n.targetLanguageUserInput,o=e.payload.platformBehavior||N.default,i={sourceLang:"auto",targetLangCode:r,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],weights:n.languagePreferenceForWriting,splitting:"paragraphs",regionalVariant:n.regionalVariant,nicheIntegration:o,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let l;try{l=await ga(i)}catch(t){try{e.payload.isWriteRequest?Jt(v.ERROR,{lang:e.payload.sourceLang,sourceLength:a.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name}):rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:c.input,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Fr(l?.sourceLang,r),e.payload.platformBehavior===N.gmail?so():e.payload.platformBehavior===N.gslides&&co();const d=r.substring(0,2).toUpperCase();if(l.sourceLang.substring(0,2).toUpperCase()===d&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(a[0].text)>4){let e;if(s.includes(d))e=await ga({...i,isWriteRequest:!0,id:t()});else{let n=await ga({...i,targetLangCode:"EN",id:t()});e=await ga({...i,sourceTexts:n.texts,id:t()})}l.texts=e.texts}try{if(l.detectedLanguages){for(const e in l.detectedLanguages)(n.languagePreferenceForWriting[e]||0===n.languagePreferenceForWriting[e])&&(n.languagePreferenceForWriting[e]=ma(n.languagePreferenceForWriting[e],l.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:n.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?Jt(v.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:a.reduce(((e,t)=>e+t.text.length),0),targetLength:l.texts.reduce(((e,t)=>e+t.length),0),nicheIntegration:o}):nt({installationId:n.installationId,trigger:c.input,websiteLanguage:l.sourceLang,targetLanguage:r,characterCount:a.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:o})}catch(e){console.error(e)}return[{detected_source_language:l.sourceLang,text:l.texts[0],texts:l.texts}]}async function Ya(e){await Nn();const t=await Rn(["session","installationId","languagePreferenceForWriting","regionalVariant","zendeskActiveTermbase"]),n=e.payload.texts,a=e.payload.targetLang,r=N.zendesk,o=Ga.TRANSLATE,s=e.payload.formality;let i,l;const d=[],g=[];let u;try{const e=await Ma({texts:n,mode:o});let r;if(l=e.result.lang.detected,t.zendeskActiveTermbase&&t.zendeskActiveTermbase.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${l.substr(0,2)}>${a.substr(0,2)}`.toLowerCase()){r={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},u=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)g.push(t),e.push(g.length-1);d.push(e)}const c=g.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<g.length-1?[g[t+1].text]:[],raw_en_context_before:t>0?[g[t-1].text]:[],sentences:[{...e,id:t+1}]})));i=await Wa({mode:o,jobs:c,sourceLang:l,targetLang:a.substr(0,2),textType:"plaintext",...s&&{formality:s},...r&&{termbase:r}})}catch(t){try{rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:a,websiteLanguage:e.payload.websiteLanguage,trigger:c.input,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}const p=i.result.translations.map(((e,t)=>`${g[t].prefix}${e.beams[0].sentences[0].text}`)),h=d.map((e=>e.map((e=>p[e]))));if(Fr(l,a),Gr(),!0!==e.payload.skipDapReporting)try{nt({installationId:t.installationId,trigger:c.input,websiteLanguage:l,targetLanguage:a,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:r,isGlossaryEnabled:u})}catch(e){console.error(e)}return[{detected_source_language:l,text:h[0],texts:h}]}async function $a(e){await Nn();const n=await Rn(["targetLanguage","session","installationId","regionalVariant"]),a=e.payload.requests,r=e.payload.sourceLang,o=e.payload.targetLang||n.targetLanguage,s=N.gmail,i={sourceLang:r||"auto",targetLangCode:o,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],splitting:"newlines",regionalVariant:n.regionalVariant};let l;try{l=await ga(i)}catch(t){try{rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,trigger:c.input,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Fr(l?.sourceLang,o),so();try{nt({installationId:n.installationId,trigger:c.manual,websiteLanguage:l.sourceLang,targetLanguage:o,characterCount:a.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:s})}catch(e){console.error(e)}return[{detected_source_language:l.sourceLang,text:l.texts[0],texts:l.texts}]}async function za(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await ga(r)}catch(t){try{wt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.length})}catch(e){console.log(e)}throw t}Fr(o?.sourceLang,n?.selectedTargetLanguage);try{nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:N.twitter})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function Za(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await ga(r)}catch(t){try{rt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:a.length,trigger:e.payload.trigger,nicheIntegration:N.linkedIn})}catch(e){console.log(e)}throw t}Fr(o?.sourceLang,n?.selectedTargetLanguage);try{nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:N.linkedIn})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function Qa(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await ga(r)}catch(t){try{It({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.length,numberOfLanguages:1,numberOfMessages:1,translator:k.message})}catch(e){console.log(e)}throw t}Fr(o?.sourceLang,n?.selectedTargetLanguage);try{St({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:a.length,numberOfLanguages:1,numberOfMessages:1,translator:k.message}),nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:N.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function Ja(e){await Nn();const n=await Rn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.messages,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:a,splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await ga(r)}catch(t){try{It({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:a.length,translator:k.chat})}catch(e){console.log(e)}throw t}Fr(o?.sourceLang,n?.selectedTargetLanguage);try{St({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:a.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:a.length,translator:k.chat}),nt({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:N.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,texts:o.texts}]}async function er(e){const{texts:t,mode:n}=e.payload;return await Ma({texts:t,mode:n})}async function tr(e){await Nn();const t=await Rn(["session","installationId","regionalVariant"]),{mode:n,sentences:a,sourceLang:r,targetLang:o,domain:s}=e.payload,i=a.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<a.length-1?[a[t+1].text]:[],raw_en_context_before:t>0?[a[t-1].text]:[],sentences:[{...e,id:t+1}],...n===Ga.WRITE&&{write_variant_requests:["main"]}}))),c=new Date,l=await Wa({mode:n,jobs:i,sourceLang:r,targetLang:o});try{n===Ga.TRANSLATE&&nt({installationId:t.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:o,characterCount:a.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-c},domainName:s,nicheIntegration:N.gdocs})}catch(e){console.error(e)}return l}async function nr(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s}=e.payload,i=[{kind:"default",preferred_num_beams:4,raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:"",id:0}],...t===Ga.WRITE&&{write_variant_requests:["main","variants"]}}];return await Wa({mode:t,jobs:i,sourceLang:n,targetLang:a})}async function ar(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s,partialTranslation:i}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:i,id:0}],...t===Ga.WRITE&&{write_variant_requests:["main"]}}];return await Wa({mode:t,jobs:c,sourceLang:n,targetLang:a})}async function rr(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s,partialTranslation:i}=e.payload,c=[{kind:"default",raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:i,id:0}],...t===Ga.WRITE&&{write_variant_requests:["main"]}}];return await Wa({mode:t,jobs:c,sourceLang:n,targetLang:a})}async function or(e){await Nn();const n=await Rn(["session","installationId","regionalVariant"]),{sourceLang:a,targetLang:r,text:o,trigger:s}=e.payload;let i="";const c={sourceLang:a,targetLangCode:r,sessionId:n.session.id,id:t(),sourceTexts:[o],splitting:"paragraphs",regionalVariant:n.regionalVariant};let l;l=await ga(c),i=l.texts?.[0]||"",Fr(a,r),Gr();try{nt({installationId:n.installationId,trigger:s,websiteLanguage:a,targetLanguage:r,characterCount:o.length,nicheIntegration:N.zendesk})}catch(e){console.error(e)}return i}async function sr(){await Nn();let e,t="";try{t=(await Va()).result||[]}catch(t){e=t.message}return[t,e]}async function ir(e){try{Tt({language:e.payload.language,domainName:e.payload.domainName})}catch(e){console.error(e)}}async function cr(e){try{st({domainName:e})}catch(e){console.error(e)}}async function lr(e){try{it({domainName:e.domainName,extensionOpenedFrom:be(e.extensionContext)})}catch(e){console.error(e)}}async function dr(e){try{ct({logoClickedFrom:De(e.extensionContext)})}catch(e){console.error(e)}}async function gr(){try{ut()}catch(e){console.error(e)}}async function ur(){try{pt()}catch(e){console.error(e)}}async function pr(e){try{ht({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||N.default})}catch(e){console.error(e)}}async function hr(e){try{mt({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})}catch(e){console.error(e)}}async function mr(e){try{Et({translationType:e.translationType,domainName:e.domainName})}catch(e){console.error(e)}}async function Tr(e){try{_t({newPosition:e.newPosition})}catch(e){console.error(e)}}async function Er(e){try{ft(e)}catch(e){console.error(e)}}async function _r(e){try{Lt(e)}catch(e){console.error(e)}}async function fr(e){try{At(e)}catch(e){console.error(e)}}async function Sr(e){try{yt(e)}catch(e){console.error(e)}}async function Ir(e){try{Nt(e)}catch(e){console.error(e)}}async function wr(e){try{Rt(e)}catch(e){console.error(e)}}async function Lr(e){try{Dt(e)}catch(e){console.error(e)}}async function yr(e){try{Ct(e)}catch(e){console.error(e)}}async function Rr(e){try{Ot(e)}catch(e){console.error(e)}}async function Ar(e){try{xt(e)}catch(e){console.error(e)}}async function Nr(e=!1){const t=await Kn(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function Cr(){ia()}async function Or(){ca({trigger:O.user})}async function br(){const e=await Fn();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType}}async function Dr(e){switch(e.type){case m.hintKeyboardShortcut:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed&&e.notificationsViewed.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}}try{lt({notificationType:e.type})}catch(e){console.error(e)}const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function kr(){return await chrome.commands.getAll()}async function Pr(e){const t=await kr();try{dt({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||N.default})}catch(e){console.error(e)}}async function xr(e){gt({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||N.default})}function vr(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function Ur(e){try{bt(e)}catch(e){console.error(e)}}async function Gr(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function Fr(e,t){const n=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","hasUserSeenProCustomerSegmentationSurvey","hasUserSeenArabicSurvey","successfulArabicTranslations"]),a=await br();yn(a,P.TRANSLATOR);const r=n.successfulTranslations+1;n.hasUserSeenProCustomerSegmentationSurvey;let o=n.isReviewPopupShown,s=n.hasUserSeenArabicSurvey,i=n.successfulArabicTranslations;if("AR"!==e&&"AR"!==t||(i+=1),!s&&"ar"===chrome.i18n.getUILanguage()&&r>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:r})}if(!s&&i>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:r})}if(!o&&r>=A){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),o=!0}await chrome.storage.sync.set({isReviewPopupShown:o,successfulArabicTranslations:i,successfulTranslations:r})}async function Mr(e,t){let n=ne(e.lang);if(K())await function(e,t,n){const a=new SpeechSynthesisUtterance(e);a.lang=t,a.onend=function(){n()},speechSynthesis.speak(a)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const a={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){const e=navigator?.userAgentData?.platform||navigator?.platform||void 0;return e&&-1!==e?.toUpperCase().indexOf("MAC")})()&&(a.rate=.9,n.voice&&y.chrome===chrome.runtime.id&&(a.voiceName=n.voice)),await chrome.tts.speak(e.text,a)}}async function Wr(){let e;return e=K()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>te(e.lang)))}async function Vr(){if(!K())return chrome.tts.stop();speechSynthesis.cancel()}async function jr(e){try{kt(e)}catch(e){console.error(e)}}async function qr(e){try{Ut(e)}catch(e){console.error(e)}}async function Br(e){try{Pt(e)}catch(e){console.error(e)}}async function Hr(e){try{Gt(e)}catch(e){console.error(e)}}async function Xr(e){return await pa(e)}async function Kr(e){try{Ft(e)}catch(e){console.error(e)}}async function Yr(e){try{Mt()}catch(e){console.error(e)}}async function $r(e){try{Wt()}catch(e){console.error(e)}}async function zr({eventType:e,zendeskMetaData:t}){try{jt(e,t)}catch(e){console.error(e)}}async function Zr(e){try{Vt(e)}catch(e){console.error(e)}}async function Qr(e){try{Xt(e)}catch(e){console.error(e)}}async function Jr(e){try{Kt(e)}catch(e){console.error(e)}}async function eo(e){try{$t(e)}catch(e){console.error(e)}}async function to(e){try{zt(e)}catch(e){console.error(e)}}async function no({eventType:e,deeplWriteMetaData:t}){try{Jt(e,t)}catch(e){console.error(e)}}async function ao(e){try{await Nn();const n=await Rn(["selectedTargetLanguage","session"]),a=e.payload.requests,r={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}};let o;if(o=await ga(r),!e.payload.skipDapReporting)try{Jt(v.TEXT_REFINEMENT_REQUEST,{lang:o.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:o.texts.reduce(((e,t)=>e+t.length),0),nicheIntegration:e.payload.nicheIntegration||N.default})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0],texts:o.texts}]}catch(t){try{Jt(v.ERROR,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e.payload.nicheIntegration||N.default,error:t.name})}catch(e){console.error(e)}throw t}}async function ro({eventType:e,acceptOrRevertMetadata:t}){try{an(e,t)}catch(e){console.error(e)}}async function oo(e){try{rn(e)}catch(e){console.error(e)}}async function so(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function io(e){try{on(e)}catch(e){console.error(e)}}async function co(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function lo({eventType:e,alternativesMetaData:t}){try{dn(e,t)}catch(e){console.error(e)}}async function go(e=!1,t=!0){let n;try{n=await sa(e,t)}catch(e){throw e.name===Yn.INVALID_GRANT&&ca({trigger:O.extension,reason:e.name,showAlert:!0}),e}return n}async function uo(){return await Bn()}function po(e){try{sn(e)}catch(e){console.error(e)}}function ho(e){try{cn(e)}catch(e){console.error(e)}}function mo(e){try{qt(e)}catch(e){console.error(e)}}function To(e){try{gn(!0,e)}catch(e){console.error(e)}}function Eo(e){try{gn(!1,e)}catch(e){console.error(e)}}function _o(e,t){try{ln(e,t)}catch(e){console.error(e)}}async function fo({text:e}){return await Fa({texts:[e],targetLang:"EN",mode:Ga.WRITE})}function So(e){un(e)}const Io={syncExperiments:"sync_experiments",syncClientState:"sync_client_state"};function wo(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const Lo={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},yo={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#inline-translation",SETTINGS_WRITING:"settings.html#input-translation",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",ONBOARDING_AFTER_SUCCESSFUL_LOGIN:"onboarding.html#successful_login",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html",CREATE_ACCOUNT:"create-account.html"};function Ro({payload:e}){const{destination:t,openInSameTab:n}=e;if(void 0===t)return;let a="";switch(t){case Lo.developer_tools:a=Ao(yo.DEVELOPER_TOOLS);break;case Lo.settings_page:a=Ao(yo.SETTINGS_PAGE);break;case Lo.settings_writing:a=Ao(yo.SETTINGS_WRITING);break;case Lo.settings_reading:a=Ao(yo.SETTINGS_READING);break;case Lo.settings_customizations:a=Ao(yo.SETTINGS_CUSTOMIZATIONS);break;case Lo.onboarding:a=K()?Ao(yo.ONBOARDING_FIREFOX):Ao(yo.ONBOARDING);break;case Lo.onboarding_after_successful_login:a=Ao(yo.ONBOARDING_AFTER_SUCCESSFUL_LOGIN);break;case Lo.firefox_first_run:a=Ao(yo.FIREFOX_FIRST_RUN);break;case Lo.privacy_policy:a=Ao(yo.PRIVACY_POLICY);break;case Lo.create_account:a=Ao(yo.CREATE_ACCOUNT)}a&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:a})})):chrome.tabs.create({url:a,active:!0}))}function Ao(e){return chrome.runtime.getURL(e)}function No(e,t,n){switch(se()&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),e.action){case"dlRequestHtmlTranslation":Ha(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestInlineTranslation":Xa(e).then((e=>{n(e)})).catch((e=>{n(Ae(e))}));break;case"dlTriggerTranslateInline":Ba(t.tab.id);break;case"dlRequestInputTranslation":Ka(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestZendeskInputTranslation":Ya(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGmailReceivedEmailTranslation":$a(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestWhatsAppMessageTranslation":Qa(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestTwitterTweetTranslation":za(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestLinkedInPostTranslation":Za(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestZendeskMessageTranslation":or(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestWhatsAppMessagesTranslation":Ja(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGDocsSplitText":er(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGDocsProcessContent":tr(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGDocsSentenceAlternatives":nr(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGDocsWordAlternatives":ar(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestGDocsSentenceFromPartialTranslation":rr(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlRequestZendeskTermbases":sr().then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlTrackDetectLanguage":ir(e),n();break;case"dlRequestLogin":Cr().then((()=>n(!0))).catch((e=>{n(Ae(e))}));break;case"dlRequestLogout":Or().then((()=>n(!0))).catch((e=>{n(Ae(e))}));break;case"dlGetAppSettings":chrome.storage.sync.get(null,(function(e){n(e)}));break;case"dlUpdateAppSettings":chrome.storage.sync.set(e.payload,(function(){n(e.payload)}));break;case"dlTranslatedInputTextNotSet":ot({errorCode:ge,errorMessage:"The translated text could not be set",domainName:e.payload}),n();break;case"dlGetUserState":br().then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlExternalURLRedirect":Z(e.payload),n();break;case"dlOpenInternalPage":Ro(e),n();break;case"dlTrackInputTranslationInjection":cr(e.payload),n();break;case"dlTrackExtensionOpenedEvent":lr(e.payload),n();break;case"dlTrackLogoClickedEvent":dr(e.payload),n();break;case"dlTrackDocTransClick":gr(),n();break;case"dlTrackRecommendToAFriendClick":ur(),n();break;case"dlSendNotification":Dr(e.payload),n();break;case"dlCheckCommandShortcuts":kr().then((e=>n(e)));break;case"dlTrackUseOfShortcut":Pr(e.payload),n();break;case"dlTrackUiAction":xr(e.payload),n();break;case"dlTrackInlineSettingOpened":pr(e.payload),n();break;case"dlTrackSettingChanged":hr(e.payload),n();break;case"dlTrackUILocationClicked":to(e.payload),n();break;case"dlTrackRightClick":mr(e.payload),n();break;case"dlTrackInlinePositionChange":Tr(e.payload),n();break;case"dlTrackInlineDragStart":Er(),n();break;case"dlTrackFptHide":_r(e.payload);break;case"dlTrackInlineCopy":Sr(e.payload),n();break;case"dlTrackInlineListen":wr(e.payload),n();break;case"dlTrackIconHover":fr(e.payload),n();break;case"dlTrackVoiceOverStops":Lr(e.payload),n();break;case"dlTrackOnboardingStepChange":Ir(e.payload),n();break;case"dlTrackOnboardingOpenExternalLink":yr(e.payload),n();break;case"dlTrackReadMore":Rr(e.payload),n();break;case"dlTrackLandingOnWebsite":Ur(e.payload),n();break;case"dlTrackGDocsReplaceText":Ar(e.payload),n();break;case"dlGetExperiments":Nr(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlGetClientState":go(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlTextToSpeech":Mr(e.payload,t.tab.id).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlGetDictionary":Xr(e.payload).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlGetSupportedVoices":Wr(e.payload).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlStopSpeech":Vr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackOpenInputHighlighter":jr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackOpenInlineHighlighter":qr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackCloseInputHighlighter":Br(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackCloseInlineHighlighter":Hr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackDictionaryStatus":Kr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackOpenDictionarySection":Yr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackDisabledDictionaryHover":$r(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackZendeskCustomizationEvent":zr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackZendeskGlossaryOpened":mo(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackGlossaryEnabled":To(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackGlossaryDisabled":Eo(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackDeeplWriteEvent":no(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackLingueeErrorData":Zr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackGdocsMaxCharExceededShown":Qr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackGDocsMaxCharExceededTryProClicked":Jr(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackOnboardingModalShown":eo(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlRequestImproveWriting":ao(e).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlTrackTranslateAcceptOrRevertEvent":ro(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackCustomizationEnabledEvent":oo(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTrackGmailCharLimitReached":io(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlGetUsersCharacterLimit":uo().then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlTrackAlternativesEvent":lo(e.payload).then((()=>n())).catch((e=>{n(Ae(e))}));break;case"dlTestClassicAPI":fo(e.payload).then((e=>n(e))).catch((e=>{n(Ae(e))}));break;case"dlOnSuccessfulZendeskTranslation":Gr();break;case"dlTrackUpgradeNotificationIsDisplayed":po(e.payload.type);break;case"dlTrackUpgradeNotificationClosed":ho(e.payload.type);break;case"dlTrackUpgradeNotificationAction":_o(e.payload.type,e.payload.cta);break;case"dlTrackLanguageDetectionForTextProcessing":So(e.payload).finally(n())}return!0}function Co(e){switch(console.log(`Command "${e}" triggered`),e){case E.triggerTranslation:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case E.changeLanguage:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function Oo(e){(async function(){let e=!1;const t=await chrome.storage.sync.get(null),n=ae();if(!t||!t.settingSchemeVersion||t.settingSchemeVersion<n.settingSchemeVersion){let a={};for(const[r,o]of Object.entries(n))r in t&&"settingSchemeVersion"!==r?a[r]=t[r]:("installationId"===r&&(e=!0),a[r]=o);await chrome.storage.sync.clear(),await chrome.storage.sync.set(a),console.log("settings set: ",a)}return{installationIdWasSet:e}})().then((t=>{!async function(e,t){const n=await Wn();n||e!==chrome.runtime.OnInstalledReason.INSTALL?n||await Mn():(await Mn(),vt(),Qt());t&&Zt()}(e.reason,t.installationIdWasSet)})).catch((e=>at({errorCode:de,errorMessage:`setSettingsAfterInstall failed: ${e.message}`}))).finally((()=>{try{Nr(),go(!0),async function(){await chrome.alarms.clearAll(),await chrome.alarms.create(Io.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),await chrome.alarms.create(Io.syncClientState,{delayInMinutes:30,periodInMinutes:30})}()}catch(e){console.error(e),at({errorCode:de,errorMessage:e.message})}try{chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),e.reason===chrome.runtime.OnInstalledReason.INSTALL&&oe()!==re.test&&(K()?Ro({payload:{destination:Lo.firefox_first_run}}):Ro({payload:{destination:Lo.create_account}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({type:"normal",id:"dlChangeLanguageShortcut",title:chrome.i18n.getMessage("extension_settings_keyboard_shortcut_change_language"),checked:!1,contexts:["all"]},(function(){})),chrome.contextMenus.create({type:"normal",id:"dlTranslateInline",title:chrome.i18n.getMessage("context_menus_translate_section"),checked:!1,contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)wo(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){at({errorCode:de,errorMessage:e.message})}}))}function bo(e){switch(e.name){case Io.syncExperiments:Nr();break;case Io.syncClientState:go()}}function Do(e){switch(e.menuItemId){case"dlTranslateInline":vr(!1);break;case"dlChangeLanguageShortcut":vr(!0)}}function ko(){}const Po={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.18.0 ${navigator.userAgent} `}]}},xo={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function vo(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:Po.setBrowserExtensionUserAgent,condition:xo.lingueeDomainFilter},{id:3,priority:1,action:Po.setBrowserExtensionUserAgent,condition:xo.deeplToolingApiDomainFilter},{id:4,priority:1,action:Po.setBrowserExtensionUserAgent,condition:xo.deeplStatisticsDomainFilter}]},(async e=>{se()&&await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=se()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.18.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}return vo(),chrome.runtime.onInstalled.addListener(Oo),chrome.contextMenus.onClicked.addListener(Do),chrome.tabs.onActivated.addListener((async function(e){wo((await chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(var n=0;n<t.length;++n)chrome.tabs.sendMessage(t[n].id,{action:"dlChangeActiveTabStatus",payload:{isActive:t[n].id===e.tabId}})})),go()})),chrome.runtime.onConnect.addListener((e=>{se()&&console.log(`port connected to tab with id: ${e.sender.tab.id}`)})),chrome.runtime.onMessage.addListener(No),chrome.storage.onChanged.addListener(ko),chrome.commands.onCommand.addListener(Co),chrome.alarms.onAlarm.addListener(bo),self.addEventListener("error",(function(e){ie(e.message)})),chrome.runtime.onMessage.addListener((e=>{"reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()}))})),e.CONTENT_PROCESS_MODE=Ga,e.INTERNAL_PAGE_KEYS=Lo,e.PERODIC_CODE_EXECUTION_NAMES=Io,e.URL_ACTIONS=Y,e.URL_LIST=$,e.cacheClientState=fn,e.cacheExperiments=In,e.checkCommandShortcuts=kr,e.clearLoginTimestamp=vn,e.commandListener=Co,e.connectDatabase=Tn,e.deleteAuthTokens=On,e.fetchClientState=sa,e.fetchExperiments=Kn,e.fetchGDocsSentenceAlternatives=nr,e.fetchGDocsWordAlternatives=ar,e.fetchZendeskTermbases=sr,e.getAccountID=Vn,e.getAllServiceLevels=Xn,e.getAuthTokens=bn,e.getBrowserInstanceId=Wn,e.getCachedClientState=Sn,e.getCachedExperiments=Ln,e.getCharacterLimit=Bn,e.getClientState=go,e.getCurrentExperiments=wn,e.getDapAlternativesSegmentationType=Je,e.getDapApiConfig=Ne,e.getDapApiExtensionOpenedFromId=be,e.getDapApiInlinePositionType=Fe,e.getDapApiLingueeError=Oe,e.getDapApiLogoClickedFromId=De,e.getDapApiNotificationType=ke,e.getDapApiSettingType=Ge,e.getDapApiShortcutTypes=xe,e.getDapApiTranslationTriggerId=Ce,e.getDapApiUiActionEventId=ve,e.getDapApiUiFunctionality=Ue,e.getDapApiUiLocation=Pe,e.getDapContentProcessingModeType=Ze,e.getDapGmailActionType=$e,e.getDapLogoutTrigger=He,e.getDapNicheIntegration=qe,e.getDapOnboardingExternalLink=Me,e.getDapOnboardingStepChangeTrigger=We,e.getDapOriginStore=Ve,e.getDapServiceLevel=Ye,e.getDapSessionType=et,e.getDapSessionTypeTrigger=Xe,e.getDapUpgradeNotificationAction=Qe,e.getDapUpgradeNotificationType=ze,e.getDapWhatsAppTranslator=Ke,e.getDictionary=Xr,e.getExperiments=Nr,e.getExperimentsData=jn,e.getExternalUrl=z,e.getInstallationId=Pn,e.getSecondsSinceLastLogin=Un,e.getSessionType=kn,e.getSettings=Rn,e.getSupportedVoices=Wr,e.getTermbases=Va,e.getUserInfo=Fn,e.getUserState=br,e.getUserType=qn,e.getUsersCharacterLimit=uo,e.getWebsiteIdFromWebsite=je,e.handleJobs=Wa,e.handleSuccessfulGmailTranslationsCount=so,e.handleSuccessfulGslidesTranslationsCount=co,e.handleSuccessfulZendeskTranslationsCount=Gr,e.improveWriting=ao,e.isPayloadNecessaryForUIEvent=Be,e.isProServiceLevel=Hn,e.isUserLoggedIn=Dn,e.jsonrpc_callFunction=da,e.jsonrpc_composeMethodCallDict=oa,e.listenToPerodicCodeExecution=bo,e.login=ia,e.loginRequest=Cr,e.logout=ca,e.logoutRequest=Or,e.markLoginTimestamp=xn,e.messageListener=No,e.onContextMenuClicked=Do,e.onInstalled=Oo,e.onStorageChanged=ko,e.openInternalPage=Ro,e.performGDocsProcessContent=tr,e.performGDocsSplitText=er,e.processContent=Fa,e.readData=_n,e.rebuildGDocsSentenceFromPartialTranslation=rr,e.redirectToExternalURL=Z,e.requestDictionary=pa,e.sendDAPAlternativesEvent=dn,e.sendDAPBrowserInstanceIdCreated=Qt,e.sendDAPCloseInlineHighlighter=Gt,e.sendDAPCloseInputHighlighter=Pt,e.sendDAPContentScriptErrorData=ot,e.sendDAPCustomizationEnabled=rn,e.sendDAPDeeplWriteEvent=Jt,e.sendDAPDetectLanguage=Tt,e.sendDAPDictionaryStatus=Ft,e.sendDAPDisabledDictionaryHover=Wt,e.sendDAPDocTransClick=ut,e.sendDAPErrorData=at,e.sendDAPExtensionOpened=it,e.sendDAPFPTHide=Lt,e.sendDAPFTPBlockSizeExceeded=async function(e){return tt((t=>({...t,eventId:60006,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))},e.sendDAPGDocsMaxCharExceededShown=Xt,e.sendDAPGDocsMaxCharExceededTryProClicked=Kt,e.sendDAPGDocsReplaceText=xt,e.sendDAPGlossaryEnabledOrDisabled=gn,e.sendDAPGmailCharLimitReached=on,e.sendDAPIconHover=At,e.sendDAPInlineCopy=yt,e.sendDAPInlineDragStart=ft,e.sendDAPInlineListen=Rt,e.sendDAPInlinePositionChange=_t,e.sendDAPInlineSettingOpened=ht,e.sendDAPInputTranslationInjection=st,e.sendDAPInstallSuccess=vt,e.sendDAPInstallationIdCreated=Zt,e.sendDAPLandingOnSpecificWebsite=bt,e.sendDAPLingueeErrorData=Vt,e.sendDAPLoggedIn=tn,e.sendDAPLoggedOut=nn,e.sendDAPLogin=Bt,e.sendDAPLogoClicked=ct,e.sendDAPLogout=Ht,e.sendDAPNotificationViewed=lt,e.sendDAPOnboardingModalShown=$t,e.sendDAPOnboardingOpenExternalPage=Ct,e.sendDAPOnboardingStepChange=Nt,e.sendDAPOpenDictionarySection=Mt,e.sendDAPOpenInlineHighlighter=Ut,e.sendDAPOpenInputHighlighter=kt,e.sendDAPReadMoreClicked=Ot,e.sendDAPRecommendToAFriendClick=pt,e.sendDAPRightClick=Et,e.sendDAPSessionStarted=en,e.sendDAPSettingsChanged=mt,e.sendDAPShortcutUsed=dt,e.sendDAPTrackLanguageDetectionForTextProcessing=un,e.sendDAPTrackUpgradeNotificationAction=ln,e.sendDAPTrackUpgradeNotificationClosed=cn,e.sendDAPTrackUpgradeNotificationDisplayed=sn,e.sendDAPTranslateAcceptOrUndoEvent=an,e.sendDAPTranslationErrorData=rt,e.sendDAPTranslationRequest=nt,e.sendDAPTwitterTweetTranslationFailed=wt,e.sendDAPUILocationClicked=zt,e.sendDAPUiAction=gt,e.sendDAPVoiceOverStops=Dt,e.sendDAPWhatsAppMessageTranslated=St,e.sendDAPWhatsAppMessageTranslationFailed=It,e.sendDAPZendeskCustomizationEvent=jt,e.sendDAPZendeskGlossaryConfigOpened=qt,e.sendDAPtrackSessionType=Yt,e.sendNotification=Dr,e.setAuthTokens=Cn,e.setBrowserInstanceId=Mn,e.setUserInfoFromClientState=Gn,e.splitText=Ma,e.stopSpeech=Vr,e.testClassicApi=fo,e.textToSpeech=Mr,e.trackAlternativesEvent=lo,e.trackCloseInlineHighlighter=Hr,e.trackCloseInputHighlighter=Br,e.trackCustomizationEnabled=oo,e.trackDeeplWriteEvent=no,e.trackDetectLanguage=ir,e.trackDictionaryStatus=Kr,e.trackDisabledDictionaryHover=$r,e.trackDocTransClick=gr,e.trackExtensionOpenedEvent=lr,e.trackFptHide=_r,e.trackGDocsMaxCharExceededTryProClicked=Jr,e.trackGDocsReplaceText=Ar,e.trackGdocsMaxCharExceededShown=Qr,e.trackGlossaryDisabled=Eo,e.trackGlossaryEnabled=To,e.trackGmailCharLimitReached=io,e.trackIconHover=fr,e.trackInlineCopy=Sr,e.trackInlineDragStart=Er,e.trackInlineListen=wr,e.trackInlinePositionChange=Tr,e.trackInlineSettingsOpened=pr,e.trackInputTranslationInjection=cr,e.trackLandingOnWebsite=Ur,e.trackLanguageDetectionForTextProcessing=So,e.trackLingueeErrorData=Zr,e.trackLogoClickedEvent=dr,e.trackOnboardingModalShown=eo,e.trackOnboardingOpenExternalLink=yr,e.trackOnboardingStepChange=Ir,e.trackOpenDictionarySection=Yr,e.trackOpenInlineHighlighter=qr,e.trackOpenInputHighlighter=jr,e.trackReadMoreClick=Rr,e.trackRecommendToAFriendClick=ur,e.trackRightClick=mr,e.trackSettingChanged=hr,e.trackTranslateAcceptOrUndoEvent=ro,e.trackUILocationClicked=to,e.trackUiAction=xr,e.trackUpgradeNotificationAction=_o,e.trackUpgradeNotificationClosed=ho,e.trackUpgradeNotificationDisplayed=po,e.trackUseOfShortcut=Pr,e.trackVoiceOverStops=Lr,e.trackZendeskCustomizationEvent=zr,e.trackZendeskGlossaryOpened=mo,e.translate=ga,e.translateGmailReceivedEmail=$a,e.translateHtmlRequest=Ha,e.translateInlineRequest=Xa,e.translateInputRequest=Ka,e.translateLinkedInPostRequest=Za,e.translateSelection=vr,e.translateTwitterTweetRequest=za,e.translateWhatsAppMessageRequest=Qa,e.translateWhatsAppMessagesRequest=Ja,e.translateZendeskInputRequest=Ya,e.translateZendeskMessageRequest=or,e.triggerTranslateInline=Ba,e.updateDynamicRules=vo,e.updateSession=Nn,e.writeData=En,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=background.js.map
