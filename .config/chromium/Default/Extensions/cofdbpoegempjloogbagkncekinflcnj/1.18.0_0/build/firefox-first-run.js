!function(){"use strict";function e(){}function t(e){return e()}function o(){return Object.create(null)}function n(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e,t,o){e.insertBefore(t,o||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function d(){return p(" ")}function m(){return p("")}function u(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function f(e,t,o){null==o?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}class h{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,o=null){var n;this.e||(this.is_svg?this.e=(n=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",n)):this.e=a(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)c(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(l)}}let g;function _(e){g=e}function w(e,t){return function(){if(!g)throw new Error("Function called outside component initialization");return g}().$$.context.set(e,t),t}const b=[],S=[];let E=[];const A=[],x=Promise.resolve();let T=!1;function k(e){E.push(e)}const v=new Set;let y=0;function N(){if(0!==y)return;const e=g;do{try{for(;y<b.length;){const e=b[y];y++,_(e),O(e.$$)}}catch(e){throw b.length=0,y=0,e}for(_(null),b.length=0,y=0;S.length;)S.pop()();for(let e=0;e<E.length;e+=1){const t=E[e];v.has(t)||(v.add(t),t())}E.length=0}while(b.length);for(;A.length;)A.pop()();T=!1,v.clear(),_(e)}function O(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}const R=new Set;function I(e,t){const o=e.$$;null!==o.fragment&&(!function(e){const t=[],o=[];E.forEach((n=>-1===e.indexOf(n)?t.push(n):o.push(n))),o.forEach((e=>e())),E=t}(o.after_update),n(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function L(e,t){-1===e.$$.dirty[0]&&(b.push(e),T||(T=!0,x.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(s,i,c,a,p,d,m,u=[-1]){const f=g;_(s);const h=s.$$={fragment:null,ctx:[],props:d,update:e,not_equal:p,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:i.target||f.$$.root};m&&m(h.root);let w=!1;if(h.ctx=c?c(s,i.props||{},((e,t,...o)=>{const n=o.length?o[0]:t;return h.ctx&&p(h.ctx[e],h.ctx[e]=n)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](n),w&&L(s,e)),t})):[],h.update(),w=!0,n(h.before_update),h.fragment=!!a&&a(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(l)}else h.fragment&&h.fragment.c();i.intro&&((b=s.$$.fragment)&&b.i&&(R.delete(b),b.i(S))),function(e,o,s,i){const{fragment:c,after_update:l}=e.$$;c&&c.m(o,s),i||k((()=>{const o=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...o):n(o),e.$$.on_mount=[]})),l.forEach(k)}(s,i.target,i.anchor,i.customElement),N()}var b,S;_(f)}class P{$destroy(){I(this,1),this.$destroy=e}$on(t,o){if(!r(o))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const e=n.indexOf(o);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function C(e){return new Promise(((t,o)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&o(e),t(e)}))}))}const j={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function M(e,t){let o;try{switch(e){case j.chrome:case j.brave:o=t.split("Chrome/")[1].split(" ")[0];break;case j.edge:o=t.split("Edg/")[1].split(" ")[0];break;case j.firefox:o=t.split("Firefox/")[1].split(" ")[0];break;case j.opera:o=t.split("OPR/")[1].split(" ")[0];break;case j.safari:o=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!o&&navigator?.userAgentData&&function(e){return e===j.chrome||e===j.edge||e===j.brave||e===j.opera}(e)&&(o=G(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return o&&"string"==typeof o?o:"unknown_browser_version"}function G(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function D(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.18.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.18.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.18.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.18.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild.toLowerCase()===j.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let o="unknown_browser",n="unknown_browser_version";const r=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||G(j.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||G(j.opera),c=e.match(/safari/i),l=G(j.brave);t?(o=j.chrome,r&&(o=j.edge),i&&(o=j.opera),l&&(o=j.brave)):r?o=j.edge:s?o=j.firefox:i?o=j.opera:c&&(o=j.safari),n=M(o,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:o,browserVersion:n,browserLang:r}}().browser===j.firefox||/moz-extension:\/\//gm.test(e)}const W="PRIVACY_POLICY",q="CREATE_ACCOUNT";function F(e,t,o){let n={block:"end",position:e.length};return t.forEach((t=>{const r=e.indexOf(`<${t}>`,o);r>-1&&r<n.position&&(n={block:t,position:r})})),[n.block,n.position]}function V(e,t=[]){const o=[];let n=0,r=!1;for(;!r;){const[s,i]=F(e,t,n);if("end"===s&&(r=!0),n<i&&o.push({block:"main",text:e.substring(n,i)}),r)break;const c=e.indexOf(`</${s}>`,i);-1===c?(o.push({block:s,text:e.substring(i+`<${s}>`.length)}),r=!0):(o.push({block:s,text:e.substring(i+`<${s}>`.length,c)}),n=c+`</${s}>`.length)}return o}const U="DEEPL_COM_TERMS_OF_SERVICE_FREE",z={origins:["<all_urls>"]},B=e=>{const t=e||chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"};function Y(e,t,o){const n=e.slice();return n[8]=t[o],n}function Z(e){let t,o,r,s,p,m,g,_,w,b,S,E,A,x,T,k,v,y,N=chrome.i18n.getMessage("firefox_legal_disclaimer_body_main")+"",O=V(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),R=[];for(let t=0;t<O.length;t+=1)R[t]=K(Y(e,O,t));return{c(){t=a("div"),o=a("div"),r=a("p"),r.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_title")}`,s=d(),p=new h(!1),m=d(),g=a("ul"),_=a("li"),w=a("span"),w.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_link_one")}`,b=d(),S=a("li");for(let e=0;e<R.length;e+=1)R[e].c();E=d(),A=a("div"),x=a("button"),x.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_allow_button")}`,T=d(),k=a("button"),k.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_disallow_and_uninstall_button")}`,f(r,"class","svelte-12kszyg"),f(o,"class","dl-title"),p.a=m,f(w,"class","dl-link svelte-12kszyg"),f(t,"class","scrollable svelte-12kszyg"),f(x,"class","svelte-12kszyg"),f(k,"class","svelte-12kszyg"),f(A,"class","footer svelte-12kszyg")},m(n,l){c(n,t,l),i(t,o),i(o,r),i(t,s),p.m(N,t),i(t,m),i(t,g),i(g,_),i(_,w),i(g,b),i(g,S);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m(S,null);c(n,E,l),c(n,A,l),i(A,x),i(A,T),i(A,k),v||(y=[u(w,"click",e[4]),u(x,"click",e[2]),u(k,"click",e[3])],v=!0)},p(e,t){if(32&t){let o;for(O=V(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),o=0;o<O.length;o+=1){const n=Y(e,O,o);R[o]?R[o].p(n,t):(R[o]=K(n),R[o].c(),R[o].m(S,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=O.length}},d(e){e&&l(t),function(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}(R,e),e&&l(E),e&&l(A),v=!1,n(y)}}}function H(t){let o,n,r=t[8].text+"";return{c(){o=new h(!1),n=m(),o.a=n},m(e,t){o.m(r,e,t),c(e,n,t)},p:e,d(e){e&&l(n),e&&o.d()}}}function Q(t){let o,n,r,s=t[8].text+"";return{c(){o=a("span"),f(o,"class","dl-link svelte-12kszyg")},m(e,i){c(e,o,i),o.innerHTML=s,n||(r=u(o,"click",t[5]),n=!0)},p:e,d(e){e&&l(o),n=!1,r()}}}function K(e){let t;let o=function(e,t){return"termsLink"===e[8].block?Q:H}(e),n=o(e);return{c(){n.c(),t=m()},m(e,o){n.m(e,o),c(e,t,o)},p(e,t){n.p(e,t)},d(e){n.d(e),e&&l(t)}}}function X(t){let o,n,r,s,p,m,h,g,_,w,b=chrome.i18n.getMessage("permission_request_widget_description")+"";return{c(){o=a("div"),n=a("div"),r=a("p"),r.textContent=`${chrome.i18n.getMessage("permission_request_widget_title")}`,s=d(),p=a("p"),m=d(),h=a("div"),g=a("button"),g.textContent=`${chrome.i18n.getMessage("permission_request_widget_button")}`,f(r,"class","svelte-12kszyg"),f(n,"class","dl-title"),f(p,"class","svelte-12kszyg"),f(o,"class","scrollable svelte-12kszyg"),f(g,"class","svelte-12kszyg"),f(h,"class","footer svelte-12kszyg")},m(e,l){c(e,o,l),i(o,n),i(n,r),i(o,s),i(o,p),p.innerHTML=b,c(e,m,l),c(e,h,l),i(h,g),_||(w=u(g,"click",t[6]),_=!0)},p:e,d(e){e&&l(o),e&&l(m),e&&l(h),_=!1,w()}}}function J(t){let o,n,r,s,p,m,u=t[0]===t[1].legal_disclaimer&&Z(t),h=t[0]===t[1].browser_permissions&&X(t);return{c(){o=a("div"),n=a("div"),r=d(),s=a("div"),p=a("div"),u&&u.c(),m=d(),h&&h.c(),f(n,"class","dl-logo svelte-12kszyg"),f(o,"class","dl-logo-container svelte-12kszyg"),f(o,"dir",B()),function(e,t,o){e.classList[o?"add":"remove"](t)}(o,"isFirefoxExtension",D),f(p,"class","dl-notice-container svelte-12kszyg"),f(s,"class","dl-firefox-first-run-page svelte-12kszyg"),f(s,"dir",B())},m(e,t){c(e,o,t),i(o,n),c(e,r,t),c(e,s,t),i(s,p),u&&u.m(p,null),i(p,m),h&&h.m(p,null)},p(e,[t]){e[0]===e[1].legal_disclaimer?u?u.p(e,t):(u=Z(e),u.c(),u.m(p,m)):u&&(u.d(1),u=null),e[0]===e[1].browser_permissions?h?h.p(e,t):(h=X(e),h.c(),h.m(p,null)):h&&(h.d(1),h=null)},i:e,o:e,d(e){e&&l(o),e&&l(r),e&&l(s),u&&u.d(),h&&h.d()}}}function ee(e,t,o){w("text_direction",B());let n={legal_disclaimer:"LEGAL_DISCLAIMER",browser_permissions:"BROWSER_PERMISSIONS"},r=n.legal_disclaimer;return[r,n,async()=>{await chrome.permissions.contains(z)||o(0,r=n.browser_permissions)},()=>{browser.management.uninstallSelf()},()=>{C({action:"dlOpenInternalPage",payload:{destination:W}})},()=>{C({action:"dlExternalURLRedirect",payload:{destination:U}})},async()=>{await browser.permissions.request(z)&&C({action:"dlOpenInternalPage",payload:{destination:q,openInSameTab:!0}})}]}new class extends P{constructor(e){super(),$(this,e,ee,J,s,{})}}({target:document.body})}();
//# sourceMappingURL=firefox-first-run.js.map
